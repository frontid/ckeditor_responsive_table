{"version":3,"sources":["plugin.js"],"names":["CKEDITOR","plugins","add","requires","icons","init","editor","$","jQuery","updateHiddenHeaderLabels","_table","$table","columnTh","find","each","$th","columnIndex","index","$cols","$col","attr","text","addCommand","dialogCommand","dialog","path","on","e","el","getSelection","getStartElement","tagName","getParent","hasClass","ui","addButton","label","command"],"mappings":";;AAAA;;;;;AAKAA,SAASC,OAAT,CAAiBC,GAAjB,CAAqB,2BAArB,EAAkD;AAChDC,YAAU,cADsC;;AAGhD;AACA;AACAC,SAAO,iBALyC;;AAOhDC;AAAM,kBAAUC,MAAV,EAAkB;AACtB,UAAIC,IAAIC,MAAR;;AAEA;;;;;AAKA,eAASC,wBAAT,CAAkCC,MAAlC,EAA0C;;AAExC,YAAIC,SAASJ,EAAEG,OAAOH,CAAT,CAAb;AACA,YAAIK,WAAWD,OAAOE,IAAP,CAAY,UAAZ,CAAf;;AAEAD,iBAASE,IAAT,CAAc,YAAY;AACxB,cAAIC,MAAMR,EAAE,IAAF,CAAV;AACA,cAAIS,cAAcT,EAAE,IAAF,EAAQU,KAAR,KAAkB,CAApC;AACA,cAAIC,QAAQP,OAAOE,IAAP,CAAY,qBAAqBG,WAArB,GAAmC,GAA/C,CAAZ;;AAEAE,gBAAMJ,IAAN,CAAW,YAAY;AACrB,gBAAIK,OAAOZ,EAAE,IAAF,CAAX;AACAY,iBAAKC,IAAL,CAAU,YAAV,EAAwBL,IAAIM,IAAJ,EAAxB;AACD,WAHD;AAKD,SAVD;AAYD;;AAEDf,aAAOgB,UAAP,CAAkB,UAAlB,EAA8B,IAAItB,SAASuB,aAAb,CAA2B,cAA3B,CAA9B;AACAvB,eAASwB,MAAT,CAAgBtB,GAAhB,CAAoB,cAApB,EAAoC,KAAKuB,IAAL,GAAY,kBAAhD;;AAEA;AACAnB,aAAOoB,EAAP,CAAU,QAAV,EAAoB,UAAUC,CAAV,EAAa;AAC/B,YAAIC,KAAKtB,OAAOuB,YAAP,GAAsBC,eAAtB,EAAT;;AAEA,YAAIF,OAAO,IAAP,IAAeA,GAAGrB,CAAH,CAAKwB,OAAL,KAAiB,IAApC,EAA0C;AACxC,cAAIrB,SAASkB,GAAGI,SAAH,GAAeA,SAAf,GAA2BA,SAA3B,EAAb;AACA,cAAItB,OAAOuB,QAAP,CAAgB,qBAAhB,CAAJ,EAA4C;AAC1CxB,qCAAyBC,MAAzB;AACD;AACF;AAEF,OAVD;;AAaA;AACAJ,aAAO4B,EAAP,CAAUC,SAAV,CAAoB,iBAApB,EAAuC;AACrCC,eAAO,kBAD8B;AAErCC,iBAAS;AAF4B,OAAvC;AAKD;;AAlDD;AAAA;AAPgD,CAAlD","file":"plugin.js","sourcesContent":["/**\n * @file\n * Responsive table plugin.\n */\n\nCKEDITOR.plugins.add('ckeditor_responsive_table', {\n  requires: 'dialog,table',\n\n  // Must be the same name of editor.ui.addButton('thisName')\n  // Is case insensitive.\n  icons: 'responsiveTable',\n\n  init: function (editor) {\n    var $ = jQuery;\n\n    /**\n     * Updates the hidden labels (only visible at mobile).\n     *\n     * @param _table Ckeditor's table element.\n     */\n    function updateHiddenHeaderLabels(_table) {\n\n      var $table = $(_table.$);\n      var columnTh = $table.find(\"thead th\");\n\n      columnTh.each(function () {\n        var $th = $(this);\n        var columnIndex = $(this).index() + 1;\n        var $cols = $table.find('tr td:nth-child(' + columnIndex + ')');\n\n        $cols.each(function () {\n          var $col = $(this);\n          $col.attr('data-label', $th.text());\n        });\n\n      });\n\n    }\n\n    editor.addCommand('setTable', new CKEDITOR.dialogCommand('table_dialog'));\n    CKEDITOR.dialog.add('table_dialog', this.path + 'dialogs/table.js');\n\n    // On init we need to track the table changes.\n    editor.on('change', function (e) {\n      var el = editor.getSelection().getStartElement();\n\n      if (el !== null && el.$.tagName === \"TH\") {\n        var _table = el.getParent().getParent().getParent();\n        if (_table.hasClass('ck-responsive-table')) {\n          updateHiddenHeaderLabels(_table);\n        }\n      }\n\n    });\n\n\n    // Ad the button to the toolbar.\n    editor.ui.addButton('ResponsiveTable', {\n      label: 'Responsive table',\n      command: 'setTable'\n    });\n\n  }\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbi5qcyJdLCJuYW1lcyI6WyJDS0VESVRPUiIsInBsdWdpbnMiLCJhZGQiLCJyZXF1aXJlcyIsImljb25zIiwiaW5pdCIsImVkaXRvciIsIiQiLCJqUXVlcnkiLCJ1cGRhdGVIaWRkZW5IZWFkZXJMYWJlbHMiLCJfdGFibGUiLCIkdGFibGUiLCJjb2x1bW5UaCIsImZpbmQiLCJlYWNoIiwiJHRoIiwiY29sdW1uSW5kZXgiLCJpbmRleCIsIiRjb2xzIiwiJGNvbCIsImF0dHIiLCJ0ZXh0IiwiYWRkQ29tbWFuZCIsImRpYWxvZ0NvbW1hbmQiLCJkaWFsb2ciLCJwYXRoIiwib24iLCJlIiwiZWwiLCJnZXRTZWxlY3Rpb24iLCJnZXRTdGFydEVsZW1lbnQiLCJ0YWdOYW1lIiwiZ2V0UGFyZW50IiwiaGFzQ2xhc3MiLCJ1aSIsImFkZEJ1dHRvbiIsImxhYmVsIiwiY29tbWFuZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7QUFLQUEsU0FBU0MsT0FBVCxDQUFpQkMsR0FBakIsQ0FBcUIsMkJBQXJCLEVBQWtEO0FBQ2hEQyxZQUFVLGNBRHNDOztBQUdoRDtBQUNBO0FBQ0FDLFNBQU8saUJBTHlDOztBQU9oREM7QUFBTSxrQkFBVUMsTUFBVixFQUFrQjtBQUN0QixVQUFJQyxJQUFJQyxNQUFSOztBQUVBOzs7OztBQUtBLGVBQVNDLHdCQUFULENBQWtDQyxNQUFsQyxFQUEwQzs7QUFFeEMsWUFBSUMsU0FBU0osRUFBRUcsT0FBT0gsQ0FBVCxDQUFiO0FBQ0EsWUFBSUssV0FBV0QsT0FBT0UsSUFBUCxDQUFZLFVBQVosQ0FBZjs7QUFFQUQsaUJBQVNFLElBQVQsQ0FBYyxZQUFZO0FBQ3hCLGNBQUlDLE1BQU1SLEVBQUUsSUFBRixDQUFWO0FBQ0EsY0FBSVMsY0FBY1QsRUFBRSxJQUFGLEVBQVFVLEtBQVIsS0FBa0IsQ0FBcEM7QUFDQSxjQUFJQyxRQUFRUCxPQUFPRSxJQUFQLENBQVkscUJBQXFCRyxXQUFyQixHQUFtQyxHQUEvQyxDQUFaOztBQUVBRSxnQkFBTUosSUFBTixDQUFXLFlBQVk7QUFDckIsZ0JBQUlLLE9BQU9aLEVBQUUsSUFBRixDQUFYO0FBQ0FZLGlCQUFLQyxJQUFMLENBQVUsWUFBVixFQUF3QkwsSUFBSU0sSUFBSixFQUF4QjtBQUNELFdBSEQ7QUFLRCxTQVZEO0FBWUQ7O0FBRURmLGFBQU9nQixVQUFQLENBQWtCLFVBQWxCLEVBQThCLElBQUl0QixTQUFTdUIsYUFBYixDQUEyQixjQUEzQixDQUE5QjtBQUNBdkIsZUFBU3dCLE1BQVQsQ0FBZ0J0QixHQUFoQixDQUFvQixjQUFwQixFQUFvQyxLQUFLdUIsSUFBTCxHQUFZLGtCQUFoRDs7QUFFQTtBQUNBbkIsYUFBT29CLEVBQVAsQ0FBVSxRQUFWLEVBQW9CLFVBQVVDLENBQVYsRUFBYTtBQUMvQixZQUFJQyxLQUFLdEIsT0FBT3VCLFlBQVAsR0FBc0JDLGVBQXRCLEVBQVQ7O0FBRUEsWUFBSUYsT0FBTyxJQUFQLElBQWVBLEdBQUdyQixDQUFILENBQUt3QixPQUFMLEtBQWlCLElBQXBDLEVBQTBDO0FBQ3hDLGNBQUlyQixTQUFTa0IsR0FBR0ksU0FBSCxHQUFlQSxTQUFmLEdBQTJCQSxTQUEzQixFQUFiO0FBQ0EsY0FBSXRCLE9BQU91QixRQUFQLENBQWdCLHFCQUFoQixDQUFKLEVBQTRDO0FBQzFDeEIscUNBQXlCQyxNQUF6QjtBQUNEO0FBQ0Y7QUFFRixPQVZEOztBQWFBO0FBQ0FKLGFBQU80QixFQUFQLENBQVVDLFNBQVYsQ0FBb0IsaUJBQXBCLEVBQXVDO0FBQ3JDQyxlQUFPLGtCQUQ4QjtBQUVyQ0MsaUJBQVM7QUFGNEIsT0FBdkM7QUFLRDs7QUFsREQ7QUFBQTtBQVBnRCxDQUFsRCIsImZpbGUiOiJwbHVnaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlXG4gKiBSZXNwb25zaXZlIHRhYmxlIHBsdWdpbi5cbiAqL1xuXG5DS0VESVRPUi5wbHVnaW5zLmFkZCgnY2tlZGl0b3JfcmVzcG9uc2l2ZV90YWJsZScsIHtcbiAgcmVxdWlyZXM6ICdkaWFsb2csdGFibGUnLFxuXG4gIC8vIE11c3QgYmUgdGhlIHNhbWUgbmFtZSBvZiBlZGl0b3IudWkuYWRkQnV0dG9uKCd0aGlzTmFtZScpXG4gIC8vIElzIGNhc2UgaW5zZW5zaXRpdmUuXG4gIGljb25zOiAncmVzcG9uc2l2ZVRhYmxlJyxcblxuICBpbml0OiBmdW5jdGlvbiAoZWRpdG9yKSB7XG4gICAgdmFyICQgPSBqUXVlcnk7XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBoaWRkZW4gbGFiZWxzIChvbmx5IHZpc2libGUgYXQgbW9iaWxlKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfdGFibGUgQ2tlZGl0b3IncyB0YWJsZSBlbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUhpZGRlbkhlYWRlckxhYmVscyhfdGFibGUpIHtcblxuICAgICAgdmFyICR0YWJsZSA9ICQoX3RhYmxlLiQpO1xuICAgICAgdmFyIGNvbHVtblRoID0gJHRhYmxlLmZpbmQoXCJ0aGVhZCB0aFwiKTtcblxuICAgICAgY29sdW1uVGguZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdGggPSAkKHRoaXMpO1xuICAgICAgICB2YXIgY29sdW1uSW5kZXggPSAkKHRoaXMpLmluZGV4KCkgKyAxO1xuICAgICAgICB2YXIgJGNvbHMgPSAkdGFibGUuZmluZCgndHIgdGQ6bnRoLWNoaWxkKCcgKyBjb2x1bW5JbmRleCArICcpJyk7XG5cbiAgICAgICAgJGNvbHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyICRjb2wgPSAkKHRoaXMpO1xuICAgICAgICAgICRjb2wuYXR0cignZGF0YS1sYWJlbCcsICR0aC50ZXh0KCkpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBlZGl0b3IuYWRkQ29tbWFuZCgnc2V0VGFibGUnLCBuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZCgndGFibGVfZGlhbG9nJykpO1xuICAgIENLRURJVE9SLmRpYWxvZy5hZGQoJ3RhYmxlX2RpYWxvZycsIHRoaXMucGF0aCArICdkaWFsb2dzL3RhYmxlLmpzJyk7XG5cbiAgICAvLyBPbiBpbml0IHdlIG5lZWQgdG8gdHJhY2sgdGhlIHRhYmxlIGNoYW5nZXMuXG4gICAgZWRpdG9yLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGVsID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpO1xuXG4gICAgICBpZiAoZWwgIT09IG51bGwgJiYgZWwuJC50YWdOYW1lID09PSBcIlRIXCIpIHtcbiAgICAgICAgdmFyIF90YWJsZSA9IGVsLmdldFBhcmVudCgpLmdldFBhcmVudCgpLmdldFBhcmVudCgpO1xuICAgICAgICBpZiAoX3RhYmxlLmhhc0NsYXNzKCdjay1yZXNwb25zaXZlLXRhYmxlJykpIHtcbiAgICAgICAgICB1cGRhdGVIaWRkZW5IZWFkZXJMYWJlbHMoX3RhYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSk7XG5cblxuICAgIC8vIEFkIHRoZSBidXR0b24gdG8gdGhlIHRvb2xiYXIuXG4gICAgZWRpdG9yLnVpLmFkZEJ1dHRvbignUmVzcG9uc2l2ZVRhYmxlJywge1xuICAgICAgbGFiZWw6ICdSZXNwb25zaXZlIHRhYmxlJyxcbiAgICAgIGNvbW1hbmQ6ICdzZXRUYWJsZSdcbiAgICB9KTtcblxuICB9XG59KTtcbiJdfQ=="}